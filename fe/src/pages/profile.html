<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hồ sơ của bé - EmoGarden</title>
    <link rel="stylesheet" href="../styles/profile.css" />
</head>

<body>
    <header>
        <div class="logo">
            <a href="home.html"> <img src="/assets/images/logo.png" alt="Logo" class="logo-image" /> </a> 
        </div>
        <div class="buttons"> 
            <a href="#" id="logout-btn">🚪 Đăng xuất</a> 
        </div> 
    </header>

    <div class="profile-container">
        <div id="error-message" class="error-message" style="display: none;"></div>

        <div class="profile-header">
            <div class="avatar-section">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Crect fill='%23ffeaa7' width='120' height='120'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='60' fill='%23fff'%3E%F0%9F%91%B6%3C/text%3E%3C/svg%3E" 
                     alt="Avatar" class="avatar" id="user-avatar" />
                <div class="avatar-badge">⭐</div>
            </div>
            <h1 id="user-name">Đang tải...</h1>
            <div class="user-level" id="user-level">Cấp độ 1</div>
        </div>

        <div class="info-grid">
            <div class="info-card">
                <h3>👤 Tên đăng nhập</h3>
                <p id="username">---</p>
            </div>
            <div class="info-card">
                <h3>📧 Email</h3>
                <p id="email">---</p>
            </div>
            <div class="info-card">
                <h3>📅 Ngày tham gia</h3>
                <p id="join-date">---</p>
            </div>
            <div class="info-card">
                <h3>🎂 Tuổi</h3>
                <p id="age">---</p>
            </div>
        </div>

        <div class="stats-section">
            <h2>📊 Thống kê chơi game</h2>
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="number" id="games-played">0</div>
                    <div class="label">Trò chơi đã chơi</div>
                </div>
                <div class="stat-box">
                    <div class="number" id="total-score">0</div>
                    <div class="label">Tổng điểm</div>
                </div>
                <div class="stat-box">
                    <div class="number" id="achievements">0</div>
                    <div class="label">Thành tích</div>
                </div>
                <div class="stat-box">
                    <div class="number" id="play-time">0h</div>
                    <div class="label">Thời gian chơi</div>
                </div>
            </div>
        </div>

        <div class="badges-section">
            <h2>🏆 Huy hiệu</h2>
            <div class="badges-container" id="badges-container">
                <div class="badge" title="Người mới">🌟</div>
                <div class="badge" title="Chính xác">🎯</div>
                <div class="badge" title="Vô địch">🏅</div>
                <div class="badge locked" title="Chưa mở khóa">🔒</div>
                <div class="badge locked" title="Chưa mở khóa">🔒</div>
                <div class="badge locked" title="Chưa mở khóa">🔒</div>
            </div>
        </div>

        <div class="action-buttons">
            <button id="edit-btn" class="btn btn-primary">✏️ Chỉnh sửa thông tin</button>
            <a href="home.html" class="btn btn-secondary">🎮 Tiếp tục chơi</a>
        </div>

        <!-- MODAL SIÊU ĐẸP -->
        <div id="edit-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">×</span>
                <h2>✏️ Chỉnh sửa thông tin</h2>
                <form id="edit-form">
                    <label>Tên đăng nhập: <input type="text" id="edit-username" /></label><br><br>
                    <label>Tên hiển thị: <input type="text" id="edit-name" required /></label><br><br>
                    <label>Email: <input type="email" id="edit-email" /></label><br><br>
                    <label>Mật khẩu mới (để trống nếu không đổi): <input type="password" id="edit-password" /></label><br><br>
                    <label>Tuổi: <input type="number" id="edit-age" min="3" /></label><br><br>
                    <label>Giới tính: 
                        <select id="edit-gender">
                            <option value="male">Nam</option>
                            <option value="female">Nữ</option>
                            <option value="other">Khác</option>
                        </select>
                    </label><br><br>
                    <label>Ngày sinh: <input type="date" id="edit-dob" /></label><br><br>
                    <label>SĐT: <input type="text" id="edit-phone" /></label><br><br>
                    <button type="submit" class="btn btn-primary">💾 Lưu</button>
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">❌ Hủy</button>
                </form>
            </div>
        </div>

        <style>
            .modal { 
                display: none; 
                position: fixed; 
                z-index: 100; 
                left: 0; top: 0; 
                width: 100%; height: 100%; 
                background: rgba(0,0,0,0.5); 
                justify-content: center; 
                align-items: center;
                padding: 20px;
                box-sizing: border-box;
            }
            .modal-content { 
                background: white; 
                padding: 30px; 
                width: 90%; 
                max-width: 500px; 
                border-radius: 20px; 
                box-shadow: 0 15px 40px rgba(0,0,0,0.3); 
                position: relative;
                animation: modalPop 0.3s ease-out;
            }
            @keyframes modalPop { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
            .close { 
                position: absolute; 
                top: 15px; 
                right: 20px; 
                font-size: 32px; 
                font-weight: bold; 
                cursor: pointer; 
                color: #aaa;
                transition: 0.2s;
            }
            .close:hover { color: #e74c3c; transform: scale(1.2); }
            #edit-form label { 
                display: block; 
                text-align: left; 
                margin: 12px 0 6px; 
                font-weight: bold; 
                color: #2c3e50;
           tyard
            #edit-form input, #edit-form select { 
                width: 100%; 
                padding: 14px; 
                margin: 5px 0; 
                border-radius: 10px; 
                border: 1px solid #ddd; 
                font-size: 16px;
                transition: 0.2s;
            }
            #edit-form input:focus, #edit-form select:focus {
                outline: none;
                border-color: #3498db;
                box-shadow: 0 0 8px rgba(52,152,219,0.3);
            }
            .btn { padding: 12px 24px; margin: 10px 5px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; }
            .btn-primary { background: #2ecc71; color: white; }
            .btn-primary:hover { background: #27ae60; }
            .btn-secondary { background: #95a5a6; color: white; }
            .btn-secondary:hover { background: #7f8c8d; }
        </style>
    </div>

    <!-- FIX SRC: NẾU profile.js Ở components -->
    <script src="../components/profile.js" defer></script>
</body>

</html>