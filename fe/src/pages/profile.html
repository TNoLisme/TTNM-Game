<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hồ sơ của bé - EmoGarden</title>
    <link rel="stylesheet" href="../styles/profile.css" />
</head>

<body>
    <header>
        <div class="logo">
            <a href="home.html"> <img src="/assets/images/logo.png" alt="Logo" class="logo-image" /> </a> 
        </div>
        <div class="buttons"> 
            <a href="#" id="logout-btn">🚪 Đăng xuất</a> 
        </div> 
    </header>

    <div class="profile-container">
        <div id="error-message" class="error-message" style="display: none;"></div>

        <div class="profile-header">
            <div class="avatar-section">
                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Crect fill='%23ffeaa7' width='120' height='120'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='60' fill='%23fff'%3E%F0%9F%91%B6%3C/text%3E%3C/svg%3E" 
                     alt="Avatar" class="avatar" id="user-avatar" />
                <div class="avatar-badge">⭐</div>
            </div>
            <h1 id="user-name">Đang tải...</h1>
            <div class="user-level" id="user-level">Cấp độ 1</div>
        </div>

        <div class="info-grid">
            <div class="info-card">
                <h3>👤 Tên đăng nhập</h3>
                <p id="username">---</p>
            </div>
            <div class="info-card">
                <h3>📧 Email</h3>
                <p id="email">---</p>
            </div>
            <div class="info-card">
                <h3>📅 Ngày tham gia</h3>
                <p id="join-date">---</p>
            </div>
            <div class="info-card">
                <h3>🎂 Tuổi</h3>
                <p id="age">---</p>
            </div>
        </div>

        <div class="stats-section">
            <h2>📊 Thống kê chơi game</h2>
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="number" id="games-played">0</div>
                    <div class="label">Trò chơi đã chơi</div>
                </div>
                <div class="stat-box">
                    <div class="number" id="total-score">0</div>
                    <div class="label">Tổng điểm</div>
                </div>
                <div class="stat-box">
                    <div class="number" id="achievements">0</div>
                    <div class="label">Thành tích</div>
                </div>
                <div class="stat-box">
                    <div class="number" id="play-time">0h</div>
                    <div class="label">Thời gian chơi</div>
                </div>
            </div>
        </div>

        <div class="badges-section">
            <h2>🏆 Huy hiệu</h2>
            <div class="badges-container" id="badges-container">
                <div class="badge" title="Người mới">🌟</div>
                <div class="badge" title="Chính xác">🎯</div>
                <div class="badge" title="Vô địch">🏅</div>
                <div class="badge locked" title="Chưa mở khóa">🔒</div>
                <div class="badge locked" title="Chưa mở khóa">🔒</div>
                <div class="badge locked" title="Chưa mở khóa">🔒</div>
            </div>
        </div>

        <!-- NEW: Report Section -->
        <div class="report-section">
            <h2>📊 Báo cáo tiến độ</h2>
            <p class="report-desc">Nhận báo cáo chi tiết về tiến độ học tập qua email</p>
            <div class="report-buttons">
                <button id="request-weekly-report" class="btn btn-report">
                    📅 Báo cáo tuần này
                </button>
                <button id="request-monthly-report" class="btn btn-report">
                    📆 Báo cáo tháng này
                </button>
            </div>
        </div>

        <div class="action-buttons">
            <button id="edit-btn" class="btn btn-primary">✏️ Chỉnh sửa thông tin</button>
            <a href="home.html" class="btn btn-secondary">🎮 Tiếp tục chơi</a>
        </div>

        <!-- Edit Profile Modal -->
        <div id="edit-modal" class="modal" aria-hidden="true">
            <div class="modal-backdrop" onclick="closeModal()"></div>
            <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="edit-modal-title">
                <button type="button" class="modal-close" aria-label="Đóng" onclick="closeModal()">×</button>
                <div class="modal-header">
                    <div class="modal-icon">✏️</div>
                    <div>
                        <h2 id="edit-modal-title">Chỉnh sửa hồ sơ</h2>
                        <p>Cập nhật thông tin cá nhân để đồng bộ với trang hồ sơ của bạn.</p>
                    </div>
                </div>
        
                <form id="edit-form" class="modal-form">
                    <div class="form-section">
                        <h3>Thông tin tài khoản</h3>
                        <div class="form-grid">
                            <label class="form-field" for="edit-username">
                                <span>Tên đăng nhập</span>
                                <input type="text" id="edit-username" autocomplete="username" />
                            </label>
                            <label class="form-field" for="edit-email">
                                <span>Email</span>
                                <input type="email" id="edit-email" autocomplete="email" />
                            </label>
                            <label class="form-field" for="edit-password">
                                <span>Mật khẩu mới</span>
                                <input type="password" id="edit-password" autocomplete="new-password"
                                    placeholder="Để trống nếu không đổi" />
                            </label>
                            <label class="form-field" for="edit-password-confirm">
                                <span>Nhập lại mật khẩu mới</span>
                                <input type="password" id="edit-password-confirm" autocomplete="new-password"
                                    placeholder="Nhập lại mật khẩu" />
                            </label>
                        </div>
                    </div>
        
                    <div class="form-section">
                        <h3>Thông tin cá nhân</h3>
                        <div class="form-grid">
                            <label class="form-field" for="edit-name">
                                <span>Tên hiển thị</span>
                                <input type="text" id="edit-name" required autocomplete="name" />
                            </label>
                            <label class="form-field" for="edit-age">
                                <span>Tuổi</span>
                                <input type="number" id="edit-age" min="3" />
                            </label>
                            <label class="form-field" for="edit-gender">
                                <span>Giới tính</span>
                                <select id="edit-gender">
                                    <option value="male">Nam</option>
                                    <option value="female">Nữ</option>
                                    <option value="other">Khác</option>
                                </select>
                            </label>
                            <label class="form-field" for="edit-dob">
                                <span>Ngày sinh</span>
                                <input type="date" id="edit-dob" />
                            </label>
                            <label class="form-field" for="edit-phone">
                                <span>Số điện thoại</span>
                                <input type="tel" id="edit-phone" autocomplete="tel" />
                            </label>
                        </div>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">💾 Lưu thay đổi</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">❌ Hủy</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="../components/profile.js" defer></script>
</body>

</html>